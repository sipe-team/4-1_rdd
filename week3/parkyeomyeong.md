# Week3 : 제안서 작성, 알람기능 적용 구간 선정

# 1. 제안서 작성
## Info

**작성자 정보**

- 작성자 : 박여명 사원
- 작성일 : 2025-05-12
- 수정일 : 2025-05-22
- 소속/부서 : 통합HR/디지털개발팀
- 읽음시간 : 10 min

## 1. 도입 배경 및 시스템 환경

현재 DMS는 **분산 서버 환경**으로 구성되어 있으며,

이미 **배치 서버**가 존재하고 다양한 시스템 간 연동 작업이 **비동기적으로** 수행되고 있습니다.

신규로 도입할 **Teams 알림 기능**은 아래와 같은 특성을 가집니다:

- 발송 트리거는 DMS 내 여러 지점에서 발생
- Microsoft Teams API 특성상 **초당 1건 제한 (Throttling)** 존재
- 실패한 발송에 대한 재 처리 필요
- 알림은 필수는 아니지만 실시간성과 신뢰성이 요구됨

---

## 2. 기존 기획 방식 (DB + 스케줄러 반복 조회)의 문제점

| 항목 | 문제 |
| --- | --- |
| 🌀 **스케줄러 주기 실행** | 초당 1건 제한이 있는 API에 대해 주기적 루프가 부하를 유발함 |
| 📉 **불필요한 DB I/O 증가** | "보낼 메시지가 있는가?"를 주기적으로 반복 조회 → **트래픽 낭비 + 인덱스 캐시 부담** |
| 🧱 **실시간성 결여** | 트리거 즉시 발송이 어렵고, **최대 지연 시간 = 스케줄러 주기** 만큼 발생 |
| 🧨 **확장 어려움** | 알림 종류/빈도가 늘어나면 DB도 복잡해질 수 있고, 배치 로직도 통제 늘어남 |
| 📊 **모니터링 어려움** | 발송 실패 여부 및 상태 추적을 위한 별도 로깅 테이블 필요 |

---

## 3. RabbitMQ 도입 시 기대 효과

### ✅ 3-1. 구조적으로 적합한 설계

RabbitMQ는 **생산자(Producer)**와 **소비자(Consumer)**를 완전히 분리해,

DMS 운영 서버에서 알림 요청을 넣고, **별도의 워커 서버(배치서버)가 API 전송을 전담하는 구조**에 매우 적합합니다.

→ **분산 서버 환경 + 초당 1건 제한**이라는 특수 상황에서 **큐 기반 흐름 제어**가 효과적

---

### ✅ 3-2. 기술적 장점

| 항목 | RabbitMQ 도입 효과 |
| --- | --- |
| ⚙ **실시간 처리** | 알림 발생 즉시 큐로 전송, **딜레이 없음** |
| 🚦 **쓰로틀링 대응** | 워커 컨슈머에서 초당 1건만 처리하도록 제한 설정 가능 (QoS 설정) |
| 🧵 **비동기 확장성** | 알림 종류가 늘어나도 큐/컨슈머만 추가하면 됨 |
| 📦 **메시지 보존성** | 처리 실패 시 **Dead Letter Queue(DLQ)** 로 재처리 가능 |
| 💾 **디스크 기반 저장 (lazy queue)** | TPS는 낮지만 메시지 누적량이 많을 수 있는 알림 시스템에 최적화 |
| 🔐 **안정성** | 시스템이 재시작되어도 **큐/메시지 보존**, 손실 없음 |
| 📈 **모니터링 용이** | RabbitMQ 웹 콘솔로 큐 상태 및 실패율 추적 가능 |

---

## 4. 왜 **RabbitMQ**인가?

Kafka 같은 대체 미들웨어도 있지만,

> RabbitMQ는 다음과 같은 이유로 더 적합합니다:
> 

| 비교 항목 | RabbitMQ |
| --- | --- |
| 💡 **학습 곡선** | Spring Boot와 자연스럽게 연동, 설정 쉬움 |
| 🧠 **TPS 요구** | 낮은 TPS에 적합 (초당 1건 제한이 있음) |
| 💾 **디스크 저장** | lazy queue + persistent 설정으로 **메모리 거의 안 씀** |
| 🛠 **운영 편의성** | 웹 UI, 플러그인, 모니터링 툴 풍부 |
| 🧩 **구조 단순성** | 초경량 메시지 처리에 최적화된 구조 |

---

## 5. 결론 및 제안

RabbitMQ는 현재 시스템 구조와 **Teams API 제약**, 그리고 향후 확장성까지 고려했을 때 가장 합리적인 선택입니다.

기존 기획 방식(DB+스케줄러)은 비효율적이고, 장애 및 유지보수 비용이 높습니다.

RabbitMQ를 도입함으로써 **부하 제어**, **재시도 처리**, **운영 안정성**, **장기 확장성** 측면에서 큰 이점을 얻을 수 있습니다.

---

## ✅ 종합적인 이점 정리

- TPS 낮아야 하는 상황에 메시지 유실 없어야 하고 실시간 성 확보가 가능
- 메모리 부담은 거의 없음 (메세지 큐를 Disk 기반으로 저장)
- 백프레셔로 서버 장애 최소화 (큐 제한 )
- DB 부하는 Down
- 이후 알람 영역 확장에 부담이 최소화된 구조

→ 이 조건을 **전부 만족하는 구조가 RabbitMQ 기반 메시징 시스템**입니다.
---
# 2. 알람 적용구간 선정 논의
알람 시스템 적용했을 경우 업무 리드타임 감소와 편의성이 가장 극적인 구간을 선정
- 구간별 리드타임 산출 후 성과 높은 순으로 추려 우선 진행 예정
- 지난 수요조사에서 가장 높은 득표를 한 업무 단계 적용하여 편의성 증대 도모

위 선정 과정을 거쳐 금주 혹은 다음주에 파일럿 운영 예정
